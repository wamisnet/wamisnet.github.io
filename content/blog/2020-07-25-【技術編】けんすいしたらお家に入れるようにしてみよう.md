---
title: 【おうちハック】【技術編】筋トレしないとお家に入れないようにしてみた
date: 2020-07-26T07:00:00.000Z
description: Twitterのつぶやきから始まった筋トレしないとお家に入れないアイデアの技術的な説明編
slug: 2020-07-26-chin_up
featured: /img/blog/slack.png
---
こんにちは！わみ([@wamisnet](https://twitter.com/wamisnet))です。

{{< tweet 1285502451643105280>}}  

【懸垂しないとお家に入れないお家】
そんなおかしなアイデアをテクノロジーで実現させちゃったお話です。

この記事は裏話的な技術編として、どんな風にこれができているのか紹介していきます。

# 作ったもの

// 動画入れる

![](/img/blog/web.png)

// 別記事のリンクも用意する

# きっかけ

私が住んでいるシェアハウスの住民のTwitterを眺めていたら面白いつぶやきを見つけたので、
さっそくSlackで話題にしました。

![](/img/blog/slack.png)

せっかく4連休があることなので、サクッとモノを作ってみようと思います。

# 構成技術

ちょっと難しいワードが出るかもしれませんが、そんなに気にしないで雰囲気ですすめていきましょう。

全体の構成図を作ってみました。

![](/img/blog/system.jpg)

懸垂をすると、天井に取り付けられたお手製ハードウエアとの距離が近くなり、距離センサーが反応します。

距離が離れたり、近づいたりすると懸垂をしたとしてカウントアップされます。

カウントアップされると、そのデータをWebページで確認でき、画像も懸垂を行います。

Webページでは、鍵を開けるために必要な懸垂の回数を設定できます。
最大255回まで設定できます。（これぐらいあればだいぶ疲れるよね…？

懸垂を指定された回数を達成するとSESAMEというスマートロックによって家の鍵を解除してくれます。

これが全体の流れになります。

## お手製ハードウエア

もう少し詳しい説明をしていきます。

お手製ハードウエアでは、ESP32というマイコンを使用しています。

このマイコンは無線LANに接続ができるので、今回のように距離を取得しながら、Webページに情報を表示するといったいわゆる「IoT」と言われるものを簡単に作れます。

そんなマイコンにはプログラムを作成する必要があります。

今回はつい最近リリースされた「obniz plug-in」を活用して作成しました。

これを活用すると次のようなメリットがあります。

- 簡単にネットワークに接続できる
- obnizでサポートしていないセンサーを活用できる
- Webページと簡単に接続ができる

といった一からつくるより簡単にオリジナルのIoTデバイスを開発できます。

それを活用して短いコード数でプログラムを作成しました。

## 懸垂回数の表示

これも先ほど話にでた「obniz」を活用して作成しています。

普通のIoTであれば、Webとハードウエアを繋げるのには大変な苦労があります。

それは、異なるモノとモノをつなげようとしているからなのですが、obnizではその差を吸収してくれます。

あとは、簡単にHTML、CSS、JavaScriptを書くだけで、Webページが完成してしまいます。

実際に2時間ぐらいでサクッと作ることができています。

## 鍵の制御

鍵の制御は、SESAMEというスマートロックを購入して、それにAPIの機能があるのでそれに指示を飛ばすだけです！

いまのシェアハウスでは、Suicaや指紋認証で入れるようになっており、このAPIを活用しています。

詳しくはこちらの記事にまとまっていますので興味のある方はぜひご覧ください！

{{< linkcard "https://qiita.com/wamisnet/items/b8a3f204dc604124ea34" >}}

